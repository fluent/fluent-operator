{{- if .Values.Kubernetes -}}
{{- if .Values.fluentbit.input.systemd.enabled -}}
apiVersion: fluentbit.fluent.io/v1alpha2
kind: ClusterInput
metadata:
  name: {{ .Values.containerRuntime }}
  labels:
    fluentbit.fluent.io/enabled: "true"
    fluentbit.fluent.io/component: logging
spec:
  systemd:
    tag: {{ .Values.fluentbit.input.systemd.tag | default "service.*" }}
    path: {{ .Values.fluentbit.input.systemd.path | default "/var/log/journal" }}
    db: {{ .Values.fluentbit.input.systemd.db | default "/fluent-bit/tail/systemd.db" }}
    dbSync: {{ .Values.fluentbit.input.systemd.dbSync | default "Normal" }}
    systemdFilter: {{ .Values.fluentbit.input.systemd.systemdFilter | default ["_SYSTEMD_UNIT={{ .Values.containerRuntime }}.service", "_SYSTEMD_UNIT=kubelet.service]" }}
{{- if .Values.fluentbit.input.systemd.additionalConfig }}
{{ toYaml .Values.fluentbit.input.systemd.additionalConfig | indent 4}}
{{- end }}
{{- end }}
{{- end }}
